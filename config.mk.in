# System paths
WORKDIR_SUFFIX	?= work
WORKDIR		?= @WORKDIR@/initrd-$(KERNEL).$(WORKDIR_SUFFIX)
ROOTDIR		?= $(WORKDIR)/root

TOOLSDIR	 = @PREFIX@/tools
DATADIR		?= @PREFIX@/data
SCRIPTDIR	?= @PREFIX@/scripts.d
FEATURESDIR	?= @PREFIX@/features
AUTODETECTDIR	?= @PREFIX@/autodetect

HELPERSDIR	?= $(TOOLSDIR)

# Helpers
GEN_INIT_CPIO		= @BINDIR@/gen_init_cpio
CREATE_INITRD		= $(TOOLSDIR)/create-initrd
PACK_IMAGE		= $(TOOLSDIR)/pack-image
ADD_MODULE		= $(TOOLSDIR)/add-module
LOAD_MODULE		= $(TOOLSDIR)/load-module
ADD_RESCUE_MODULES	= $(TOOLSDIR)/add-rescue-modules
PUT_FILE		= $(TOOLSDIR)/put-file
PUT_TREE		= $(TOOLSDIR)/put-tree

# Global variables
FIRMWARE_DIRS		?= /lib/firmware /usr/lib/hotplug/firmware /usr/local/lib/firmware
VERBOSE			?=
FSTAB			?= /etc/fstab

# User defaults
FEATURES	?=
KERNEL		?= $(shell uname -r)
IMAGE_SUFFIX	?=
IMAGEFILE	?= /boot/initrd-$(KERNEL)$(IMAGE_SUFFIX).img

# Load extra configs
include $(FEATURESDIR)/*/config.mk

ifdef VERBOSE
  verbose=-v
  Q=
else
  Q = @
endif

