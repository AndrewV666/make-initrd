#!/bin/sh

msg='Mounting root file system...'
parseroot() {
	local value minor major

	case "$ROOT" in
		""|/*)
			return
			;;
		*:*)
			minor=${ROOT#*:}
			major=${ROOT%:*}
			;;
		*)
			value=$(( 0x$ROOT ))
			minor=$(( $value % 256 ))
			major=$(( $value / 256 ))
			;;
	esac

	mknod /dev/root b "$major" "$minor"
	ROOT='/dev/root'
}

run() {
	. /scripts/"$BOOT"
	parseroot
	mountroot
}
