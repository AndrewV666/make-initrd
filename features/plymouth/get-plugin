#!/bin/sh -efu

[ "$#" -gt 0 ] ||
	exit 0

[ -f "/usr/share/plymouth/themes/$1/$1.plymouth" ] ||
	exit 0

sect=
while read -r l; do
	case "$l" in
		'[Plymouth Theme]')
			sect=1
			;;
		'['*)
			sect=
			;;
		ModuleName*=*)
			[ -n "$sect" ] || continue
			s="${l#ModuleName}"
			s="${s##*=}"
			set -- $s
			printf '%s\n' "$1"
			;;
	esac
done < "/usr/share/plymouth/themes/$1/$1.plymouth"
